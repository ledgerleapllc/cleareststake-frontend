(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"nXz+":function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),s=r("1OyB"),a=r("vuIU"),c=r("JX7q"),o=r("Ji7U"),i=r("md7G"),l=r("foSv"),u=r("rePB"),p=r("q1tI"),d=r.n(p),h=r("/MKj"),b=r("55Ip"),j=r("Ty5D"),f=r("17x9"),v=r.n(f);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var m=Object(p.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,s=e.size,a=void 0===s?24:s,c=g(e,["color","size"]);return d.a.createElement("svg",O({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.a.createElement("polyline",{points:"23 4 23 10 17 10"}),d.a.createElement("polyline",{points:"1 20 1 14 7 14"}),d.a.createElement("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}))}));m.propTypes={color:v.a.string,size:v.a.oneOfType([v.a.string,v.a.number])},m.displayName="RefreshCw";var y=m;function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var w=Object(p.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,s=e.size,a=void 0===s?24:s,c=k(e,["color","size"]);return d.a.createElement("svg",x({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.a.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))}));w.propTypes={color:v.a.string,size:v.a.oneOfType([v.a.string,v.a.number])},w.displayName="Plus";var R=w;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var C=Object(p.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,s=e.size,a=void 0===s?24:s,c=P(e,["color","size"]);return d.a.createElement("svg",S({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),d.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));C.propTypes={color:v.a.string,size:v.a.oneOfType([v.a.string,v.a.number])},C.displayName="Search";var _=C,A=r("e+cM"),U=r("d76Q"),N=r.n(U),D=r("ZpDd");r("ItTN");function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var s=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var T=function(e){Object(o.a)(r,e);var t=E(r);function r(e){var n;return Object(s.a)(this,r),n=t.call(this,e),Object(u.a)(Object(c.a)(n),"clickForceRefresh",(function(e){e.preventDefault(),n.setState({selected:[]},(function(){n.handlePageChange(1)}))})),Object(u.a)(Object(c.a)(n),"handleSort",(function(e,t){n.setState({page_id:1,sort_key:e.selector,sort_direction:t},(function(){n.getUsers()}))})),Object(u.a)(Object(c.a)(n),"handlePerRowsChange",(function(e){n.setState({page_id:1,perPage:e},(function(){n.getUsers()}))})),Object(u.a)(Object(c.a)(n),"handlePageChange",(function(e){n.setState({page_id:e},(function(){n.getUsers()}))})),Object(u.a)(Object(c.a)(n),"checkRowSelected",(function(e){return n.state.selected.includes(e.id)})),Object(u.a)(Object(c.a)(n),"handleRowSelect",(function(e){var t=[];e.selectedRows&&e.selectedRows.length&&e.selectedRows.forEach((function(e){t.push(e.id)})),n.setState({selected:t})})),Object(u.a)(Object(c.a)(n),"handleInput",(function(e){e.preventDefault(),n.setState({search:e.target.value,page_id:1},(function(){n.timer&&(clearTimeout(n.timer),n.timer=null),n.timer=setTimeout((function(){n.getUsers()}),500)}))})),Object(u.a)(Object(c.a)(n),"changeSelect",(function(e){n.setState({status:e.target.value,page_id:1},(function(){n.getUsers()}))})),Object(u.a)(Object(c.a)(n),"changeRole",(function(e){n.setState({role:e.target.value,page_id:1},(function(){n.getUsers()}))})),Object(u.a)(Object(c.a)(n),"changeBulk",(function(e){var t=e.target.value,r=n.state.selected;r&&r.length?"bulk-apply-access-group"==t?(n.props.dispatch(Object(D.D)(r)),n.props.dispatch(Object(D.C)(t))):"bulk-remove-access-group"==t&&(n.props.dispatch(Object(D.E)(r)),n.props.dispatch(Object(D.C)(t))):n.props.dispatch(Object(D.O)("Please select rows"))})),n.state={loading:!1,page_id:0,perPage:10,sort_key:"users.first_name",sort_direction:"asc",search:"",users:[],total:0,totalAll:0,totalActive:0,totalPending:0,totalRevoked:0,status:"",selected:[],role:""},n.columns=[],n.timer=null,n}return Object(a.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.authUser;this.columns=[{name:"Name",selector:"users.first_name",cell:function(t){return Object(n.jsxs)("div",{className:"user-name-box",children:[Object(n.jsxs)("label",{children:[t.first_name," ",t.last_name]}),Object(n.jsx)("div",{children:e.renderActions(t)})]})},sortable:!0,compact:!0},{name:"Email Address",selector:"users.email",cell:function(e){return Object(n.jsx)("div",{className:"overflow-text",children:e.email})},sortable:!0,compact:!0,minWidth:"250px"},{name:"Status",selector:"users.status",cell:function(e){return"active"==e.status?Object(n.jsx)("div",{className:"user-status-box ".concat(e.status),children:"Active"}):"pending"==e.status?Object(n.jsx)("div",{className:"user-status-box ".concat(e.status),children:"Pending"}):Object(n.jsx)("div",{className:"user-status-box ".concat(e.status),children:"Revoked"})},sortable:!0,compact:!0},{name:"Role",selector:"users.role",cell:function(e){return"supervisor"==e.role?"Supervisor":"loanofficer"==e.role?"Loan Officer":""},sortable:!0,compact:!0},{name:"Branch",selector:"users.branch_id",cell:function(e){return e.branchName||""},sortable:!0,compact:!0},{name:"IP Access Group",selector:"users.access_group",cell:function(e){return e.accessGroupName||""},sortable:!1,compact:!0}],t&&t.id&&this.initValues()}},{key:"componentDidUpdate",value:function(e){var t=this,r=this.props,n=r.usersTableStatus,s=r.authUser;!e.usersTableStatus&&n&&(this.props.dispatch(Object(D.N)(!1)),this.setState({selected:[]},(function(){t.handlePageChange(1)}))),e.authUser&&e.authUser.id||!s||!s.id||this.initValues()}},{key:"initValues",value:function(){var e=this,t=new URLSearchParams(window.location.search).get("role")||"";this.setState({role:t},(function(){e.getUsers()}))}},{key:"getUsers",value:function(){var e=this.state,t=e.page_id,r=e.loading,n=e.perPage,s=e.sort_key,a=e.sort_direction,c=e.search,o=e.status,i=e.role;if(!r){var l={page_id:t,page_length:n,sort_key:s,sort_direction:a,search:c,status:o,role:i};console.log(l)}}},{key:"clickRevoke",value:function(e){this.props.dispatch(Object(D.L)(e)),this.props.dispatch(Object(D.C)("revoke-user"))}},{key:"clickDelete",value:function(e){this.props.dispatch(Object(D.I)(e)),this.props.dispatch(Object(D.C)("delete-user"))}},{key:"clickCancel",value:function(e){this.props.dispatch(Object(D.F)(e)),this.props.dispatch(Object(D.C)("cancel-user-invite"))}},{key:"renderActions",value:function(e){var t=this;return Object(n.jsxs)(p.Fragment,{children:[Object(n.jsx)(b.b,{to:"/app/user/".concat(e.id,"/edit"),children:"Edit"}),"active"==e.status?Object(n.jsx)("a",{onClick:function(){return t.clickRevoke(e)},children:"Revoke"}):"pending"==e.status?Object(n.jsx)("a",{onClick:function(){return t.clickCancel(e)},children:"Cancel"}):Object(n.jsx)("a",{onClick:function(){return t.clickDelete(e)},children:"Delete"})]})}},{key:"renderAlert",value:function(){var e=this.props.blockAlertData;return e&&"user"==e.type?Object(n.jsx)(A.a,{data:e}):null}},{key:"renderTableHeader",value:function(){var e=this.state,t=e.totalAll,r=e.totalActive,s=e.totalPending,a=e.totalRevoked,c=e.status,o=e.role,i=this.props.authUser;return Object(n.jsx)(p.Fragment,{children:Object(n.jsxs)("div",{id:"app-users-page__tableHeader",children:[Object(n.jsxs)("select",{value:c,onChange:this.changeSelect,children:[Object(n.jsx)("option",{value:"",children:"Filter By Status"}),Object(n.jsxs)("option",{value:"all",children:["All Users (",t,")"]}),Object(n.jsxs)("option",{value:"active",children:["Active Users (",r,")"]}),Object(n.jsxs)("option",{value:"pending",children:["Pending Users (",s,")"]}),Object(n.jsxs)("option",{value:"revoked",children:["Revoked Users (",a,")"]})]}),"admin"==i.role||"supervisor"==i.role?Object(n.jsxs)("select",{id:"filter-role",value:o,onChange:this.changeRole,children:[Object(n.jsx)("option",{value:"",children:"Filter By Role"}),Object(n.jsx)("option",{value:"all",children:"All Roles"}),Object(n.jsx)("option",{value:"supervisor",children:"Supervisor"}),Object(n.jsx)("option",{value:"loanofficer",children:"Loan Officer"})]}):null,Object(n.jsx)("a",{onClick:this.clickForceRefresh,children:Object(n.jsx)(y,{})}),Object(n.jsxs)("select",{value:"",onChange:this.changeBulk,children:[Object(n.jsx)("option",{value:"",children:"Bulk Actions"}),Object(n.jsx)("option",{value:"bulk-apply-access-group",children:"Apply Access Group"}),Object(n.jsx)("option",{value:"bulk-remove-access-group",children:"Remove Access Group"})]})]})})}},{key:"render",value:function(){var e=this.state,t=e.users,r=e.loading,s=e.total,a=e.perPage,c=e.search;return Object(n.jsxs)("div",{id:"app-users-page",children:[Object(n.jsx)("div",{id:"app-users-pageHeader",children:Object(n.jsxs)("div",{className:"c-container",children:[Object(n.jsxs)(b.b,{to:"/app/user/new",className:"btn btn-primary btn-icon",children:[Object(n.jsx)(R,{size:18}),Object(n.jsx)("label",{className:"font-size-14",children:"Add User"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"text",value:c,placeholder:"Search by name, email or branch",onChange:this.handleInput}),Object(n.jsx)(_,{color:"#B2C6CF",size:18})]})]})}),Object(n.jsxs)("div",{className:"c-container",children:[this.renderAlert(),this.renderTableHeader(),Object(n.jsx)("div",{className:"table-wrapper",children:Object(n.jsx)(N.a,{columns:this.columns,data:t,sortServer:!0,onSort:this.handleSort,progressPending:r,responsive:!0,noHeader:!0,striped:!0,persistTableHead:!0,pagination:!0,paginationServer:!0,onChangeRowsPerPage:this.handlePerRowsChange,onChangePage:this.handlePageChange,paginationTotalRows:s,paginationPerPage:a,paginationRowsPerPageOptions:[10,20,30,40,50],selectableRows:!0,selectableRowSelected:this.checkRowSelected,onSelectedRowsChange:this.handleRowSelect})})]})]})}}]),r}(p.Component);t.default=Object(h.b)((function(e){return{blockAlertData:e.global.blockAlertData,bulkApplyAccessGroupUsersData:e.modal.bulkApplyAccessGroupUsersData,bulkRemoveAccessGroupUsersData:e.modal.bulkRemoveAccessGroupUsersData,usersTableStatus:e.table.usersTableStatus,authUser:e.global.authUser}}))(Object(j.g)(T))}}]);