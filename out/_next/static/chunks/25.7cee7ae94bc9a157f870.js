(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{EYTY:function(e,t,a){"use strict";a.r(t);var n=a("nKUr"),s=a("1OyB"),c=a("vuIU"),r=a("JX7q"),o=a("Ji7U"),i=a("md7G"),l=a("foSv"),d=a("rePB"),u=a("q1tI"),b=a("/MKj"),h=a("Ty5D"),f=a("d76Q"),p=a.n(f),j=a("ohBo"),m=a.n(j),g=a("YW6W"),O=a("LADp"),v=a("ZpDd");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var s=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var x=a("wd/R"),y=function(e){Object(o.a)(a,e);var t=_(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),Object(d.a)(Object(r.a)(n),"handleSort",(function(e,t){n.setState({page_id:1,sort_key:e.selector,sort_direction:t},(function(){n.getLogs()}))})),Object(d.a)(Object(r.a)(n),"handlePerRowsChange",(function(e){n.setState({page_id:1,perPage:e},(function(){n.getLogs()}))})),Object(d.a)(Object(r.a)(n),"handlePageChange",(function(e){n.setState({page_id:e},(function(){n.getLogs()}))})),n.state={logs:[],total:0,loading:!1,sort_key:"log.id",sort_direction:"desc",page_id:0,perPage:10,status:""},n.columns=[],n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.columns=[{name:"Date",selector:"log.created_at",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:x(e.created_at).local().format("M/D/YYYY h:mm A")})},sortable:!0,compact:!0},{name:"IP",selector:"log.ip",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:e.ip})},sortable:!0,compact:!0}],this.getLogs()}},{key:"getLogs",value:function(){var e=this,t=this.state,a=t.page_id,n=t.loading,s=t.perPage,c=t.sort_key,r=t.sort_direction,o=this.props.userId;if(!n){var i={page_id:a,page_length:s,sort_key:c,sort_direction:r,userId:o};this.props.dispatch(Object(O.m)(i,(function(){e.setState({loading:!0})}),(function(t){var a=t.total||0,n=t.logs||[];e.setState({loading:!1,total:a,logs:n})})))}}},{key:"render",value:function(){var e=this.props.authUser;if(!e||!e.id)return null;var t=this.state,a=t.loading,s=t.logs,c=t.total,r=t.perPage;return Object(n.jsx)(p.a,{columns:this.columns,data:s,sortServer:!0,progressPending:a,responsive:!0,noHeader:!0,striped:!0,persistTableHead:!0,onSort:this.handleSort,pagination:!0,paginationServer:!0,onChangeRowsPerPage:this.handlePerRowsChange,onChangePage:this.handlePageChange,paginationTotalRows:c,paginationPerPage:r,paginationRowsPerPageOptions:[10,20,30,40,50]})}}]),a}(u.Component),N=Object(b.b)((function(e){return{authUser:e.global.authUser}}))(Object(h.g)(y));a("MzTq");function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var s=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var w=a("wd/R"),S=function(e){Object(o.a)(a,e);var t=k(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),Object(d.a)(Object(r.a)(n),"handleChange",(function(){var e=n.state,t=e.in_fund,a=e.user;if(t&&a.usd)n.props.dispatch(Object(v.O)("User had fund sales and must stay in fund","warning","right"));else{var s=n.props.match.params.userId,c=!t;n.setState({in_fund:c},(function(){n.props.dispatch(Object(O.z)({id:s,body:{in_fund:+c}},(function(){n.props.dispatch(Object(v.P)())}),(function(){n.props.dispatch(Object(v.y)())})))}))}})),Object(d.a)(Object(r.a)(n),"downloadCSV",(function(){var e=n.props.match.params.userId;n.props.dispatch(Object(O.e)({id:e},(function(){n.props.dispatch(Object(v.P)())}),(function(e){var t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=t,a.setAttribute("download","user_transactions.csv"),document.body.appendChild(a),a.click(),n.props.dispatch(Object(v.y)())})))})),n.state={user:{},transactions:[],total:0,loading:!1,sort_key:"transactions.id",sort_direction:"desc",in_fund:!1,usd_fund_total:0,fund_total:0},n.columns=[],n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.columns=[{name:"Date",selector:"transactions.created_at",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:w(e.created_at).local().format("M/D/YYYY h:mm A")})},sortable:!1,compact:!0},{name:"Transaction Type",selector:"transactions.action",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:e.action})},sortable:!1,compact:!0},{name:"Amount of Transaction",selector:"transactions.amount",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:g.a.formatNumber(e.amount)})},sortable:!1,compact:!0},{name:"USD",selector:"transactions.usd",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:e.usd?"$".concat(g.a.formatNumber(e.usd)):"$0"})},sortable:!1,compact:!0},{name:"Total",selector:"transactions.balance",cell:function(e){return Object(n.jsx)("label",{className:"font-size-14",children:g.a.formatNumber(e.balance)})},sortable:!0,compact:!0}];var a=t.userId,s=this.state,c=s.loading,r=s.sort_key,o=s.sort_direction;if(!c){var i={sort_key:r,sort_direction:o};this.props.dispatch(Object(O.p)(a,i,(function(){e.setState({loading:!0})}),(function(t){var a=t.user||{},n=t.transactions||[],s=t.total||0,c=t.user.in_fund||!1,r=t.usd_fund_total,o=t.fund_total;e.setState({loading:!1,user:a,total:s,transactions:n,in_fund:c,usd_fund_total:r,fund_total:o})})))}}},{key:"renderInfo",value:function(){var e=this.state,t=e.user,a=e.in_fund,s=e.usd_fund_total,c=e.fund_total;return t&&t.id?Object(n.jsxs)("div",{className:"single-user-info",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("label",{className:"d-block font-size-14",children:["Name: ",t.first_name," ",t.last_name]}),Object(n.jsxs)("label",{className:"d-block font-size-14 mt-1",children:["Email: ",t.email]}),Object(n.jsxs)("label",{className:"d-block font-size-14 mt-1",children:["Token Balance:"," ",t.balance?g.a.formatNumber(t.balance):"0"]}),Object(n.jsxs)("label",{className:"d-block font-size-14 mt-1",children:["USD Fund Sale Total:"," ",s?"$".concat(g.a.formatNumber(s)):"$0"]}),Object(n.jsxs)("label",{className:"d-block font-size-14 mt-1",children:["Withdraw and Fund Sale Total:"," ",c?g.a.formatNumber(c):"0"]})]}),Object(n.jsx)("div",{children:Object(n.jsxs)("label",{className:"slick-label",children:[Object(n.jsx)(m.a,{onChange:this.handleChange,checked:a,uncheckedIcon:!1,checkedIcon:!1,height:25,width:50,onColor:"#0376BC"}),Object(n.jsx)("span",{children:"In Fund"})]})})]}):null}},{key:"render",value:function(){var e=this.props.authUser;if(!e||!e.id)return null;var t=this.state,a=t.loading,s=t.user,c=t.transactions;return a||s&&s.id?Object(n.jsx)("div",{id:"app-single-user-page",children:Object(n.jsxs)("div",{className:"c-container",children:[Object(n.jsx)("div",{className:"app-page-header mb-3",children:Object(n.jsx)("h2",{children:"Single User Detail"})}),this.renderInfo(),s&&s.id?Object(n.jsxs)(u.Fragment,{children:[Object(n.jsx)("h3",{className:"mt-5",children:"Logins"}),Object(n.jsx)("div",{className:"table-wrapper mt-3",children:Object(n.jsx)(N,{userId:s.id})})]}):null,Object(n.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-5",children:[Object(n.jsx)("h3",{children:"Transactions"}),Object(n.jsx)("a",{className:"btn btn-primary",onClick:this.downloadCSV,children:Object(n.jsx)("label",{className:"font-size-14",children:"Download CSV"})})]}),Object(n.jsx)("div",{className:"table-wrapper mt-3",children:Object(n.jsx)(p.a,{columns:this.columns,data:c,sortServer:!0,progressPending:a,responsive:!0,noHeader:!0,striped:!0,persistTableHead:!0})})]})}):Object(n.jsx)("div",{id:"app-single-user-page",children:Object(n.jsxs)("div",{className:"c-container",children:[Object(n.jsx)("div",{className:"app-page-header mb-3",children:Object(n.jsx)("h2",{children:"Single User Detail"})}),Object(n.jsx)("p",{children:"No details found"})]})})}}]),a}(u.Component);t.default=Object(b.b)((function(e){return{authUser:e.global.authUser}}))(Object(h.g)(S))}}]);